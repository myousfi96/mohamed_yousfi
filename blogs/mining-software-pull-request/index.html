<!DOCTYPE html>
<html>

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/mohamed_yousfi/portfolio.png type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/mohamed_yousfi//css/font.css" media="all">



<meta property="og:title" content="Leveraging Machine Learning to Identify Optimal Pull Request Characteristics" />
<meta property="og:description" content="Introduction In the realm of collaborative software development, pull requests play a pivotal role in code integration and review. However, understanding the key factors that determine the success of pull requests can be complex.
In this blog post, we utilize machine learning to uncover insights into the crucial factors impacting pull request outcomes. By analyzing a diverse dataset collected from various repositories using the GitHub API, we reveal the factors that significantly influence the decision to merge or reject pull requests." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://myousfi96.github.io/mohamed_yousfi/blogs/mining-software-pull-request/" /><meta property="article:section" content="blogs" />
<meta property="article:published_time" content="2023-04-03T23:29:21+05:30" />
<meta property="article:modified_time" content="2023-04-03T23:29:21+05:30" /><meta property="og:site_name" content="Mohamed Yousfi" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Leveraging Machine Learning to Identify Optimal Pull Request Characteristics"/>
<meta name="twitter:description" content="Introduction In the realm of collaborative software development, pull requests play a pivotal role in code integration and review. However, understanding the key factors that determine the success of pull requests can be complex.
In this blog post, we utilize machine learning to uncover insights into the crucial factors impacting pull request outcomes. By analyzing a diverse dataset collected from various repositories using the GitHub API, we reveal the factors that significantly influence the decision to merge or reject pull requests."/>


<link rel="stylesheet" href="/mohamed_yousfi//bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/mohamed_yousfi//css/header.css" media="all">
<link rel="stylesheet" href="/mohamed_yousfi//css/footer.css" media="all">


<link rel="stylesheet" href="/mohamed_yousfi//css/theme.css" media="all">




<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        width: .5em;
        height: .5em;
        background-color: var(--background-color);
    }
    
    ::-webkit-scrollbar-track {
        box-shadow: inset 0 0 6px var(--background-color);
        border-radius: 1rem;
    }
    
    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background-color: var(--secondary-color);
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>

<meta name="description" content="">
<link rel="stylesheet" href="/mohamed_yousfi//css/single.css">


<script defer src="/mohamed_yousfi//fontawesome-5/all-5.15.4.js"></script>

  <title>
Leveraging Machine Learning to Identify Optimal Pull Request Characteristics | Mohamed Yousfi

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>



<header>
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/mohamed_yousfi">
                
                <img src="/mohamed_yousfi/portfolio.png" width="30" height="30"
                    class="d-inline-block align-top">
                Mohamed Yousfi
                
            </a>

            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi#about" aria-label="about">
                            About Me
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi#experience"
                            aria-label="experience">
                            Experience
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi#education"
                            aria-label="education">
                            Education
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi#projects"
                            aria-label="projects">
                            Projects
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi#achievements"
                            aria-label="achievements">
                            Achievements
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi#contact"
                            aria-label="contact">
                            Contact
                        </a>
                    </li>
                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/mohamed_yousfi/blogs" title="Blog posts">
                            
                            Blog
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>

            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">Leveraging Machine Learning to Identify Optimal Pull Request Characteristics</h1>
            <div class="text-center">
              Mohamed Yousfi 
              <small>|</small>
              Apr 3, 2023

              
              <span id="readingTime">
                min read
              </span>
              
            </div>
          </div>
          
          <div class="featured-image">
            <img class="img-fluid" src="/mohamed_yousfi/mining_software.jpg" alt="Leveraging Machine Learning to Identify Optimal Pull Request Characteristics">
          </div>
          
          <article class="page-content  p-2">
          <h2 id="introduction">Introduction</h2>
<p>In the realm of collaborative software development, pull requests play a pivotal role in code integration and review. However, understanding the key factors that determine the success of pull requests can be complex.</p>
<p>In this blog post, we utilize machine learning to uncover insights into the crucial factors impacting pull request outcomes. By analyzing a diverse dataset collected from various repositories using the GitHub API, we reveal the factors that significantly influence the decision to merge or reject pull requests.</p>
<p>Through data cleaning, feature engineering, and model training, we identify the most impactful characteristics. Our analysis highlights factors like the number of commits, review comment count, and time difference between creation and last update as key contributors to pull request success.</p>
<p>By leveraging the power of machine learning, we provide valuable insights to development teams, enabling them to optimize their workflow and improve the chances of successful code integration.</p>
<p>Join us as we explore the fascinating dynamics of pull requests and unlock the potential of machine learning to gain deeper understanding in this essential aspect of software development.</p>
<p><strong>Note:</strong> You can download the code and Goolge Collab from github <strong><a href="https://github.com/myousfi96/pull_request_mining">here</a></strong></p>
<h2 id="what-is-a-pull-request">What is a Pull Request?</h2>
<p>For those who may be less familiar with the concept, a pull request is a fundamental component of the development process. It represents a formalized request to merge changes made in a branch or fork of our code repository into the main branch, typically referred to as the &ldquo;master&rdquo; or &ldquo;main&rdquo; branch. Pull requests allow team members to propose modifications, additions, or fixes, providing an opportunity for thorough review and discussion before merging the changes into the main codebase.</p>
<h2 id="collecting-data">Collecting data</h2>
<p>GitHub is the optimal resource for gathering pull requests, and I utilized the GitHub API to accomplish this task. The API offers a user-friendly and efficient approach; however, it does have a limitation of 5000 requests per hour. To ensure a diverse dataset, I selected multiple repositories to collect pull requests from. Below is a description of the collected data</p>
<ul>
<li>Ansible :: 2200 PR</li>
<li>Aiida :: 700 PR</li>
<li>Pandas ::  2000 PR</li>
<li>Matplotlib :: 1900 PR</li>
<li>NNI :: 1600 PR</li>
<li>Jinja :: 700 PR</li>
<li>Gym :: 1000 PR</li>
<li>Django :: 6800 PR</li>
</ul>
<p>Total: 16900 Pull Requests!</p>
<p>I collected the following information from each pull request:</p>
<ol>
<li><strong>merged_at:</strong> Indicates the date and time of the merge.</li>
<li><strong>author_followers:</strong> Represents the number of followers the author has.</li>
<li><strong>updated_at:</strong> Specifies the most recent update timestamp.</li>
<li><strong>created_at:</strong> Indicates the pull request&rsquo;s creation date.</li>
<li><strong>requested_reviewers:</strong> Shows the count of requested reviewers.</li>
<li><strong>repo_size:</strong> Represents the size of the entire repository.</li>
<li><strong>repo_open_issues_count:</strong> Indicates the current number of open issues in the repository.</li>
<li><strong>repo_watchers:</strong> Represents the current count of users watching the repository.</li>
<li><strong>author_association:</strong> Indicates the role or association of the author.</li>
<li><strong>merged:</strong> A boolean value indicating whether the pull request was merged (true) or not (false).</li>
<li><strong>commits:</strong> Specifies the number of commits associated with the pull request.</li>
<li><strong>additions:</strong> Represents the number of lines added in the pull request.</li>
<li><strong>deletions:</strong> Indicates the number of lines removed in the pull request.</li>
<li><strong>changed_files:</strong> Specifies the number of files changed in the pull request.</li>
<li><strong>body_length:</strong> Represents the length of the pull request description.</li>
<li><strong>mergable_status</strong>: Give information if the pull request can be merged or not.</li>
<li><strong>comments_count</strong>: The number of comments in this pull request.</li>
<li><strong>review_comments_count</strong>: The number of review comments in this pull request.</li>
</ol>
<p>Once I have collected the pull requests from each repository, I save the data in a file format known as JSON. This allows for efficient storage and retrieval of the gathered information.</p>
<p><strong>Note:</strong> It is important to mention that all the pull requests that have been collected are in a closed state, indicating that they have either been merged or rejected.</p>
<h2 id="data-cleaning-and-features-engineering">Data cleaning and Features Engineering</h2>
<p>After collecting the data and saving it in a JSON file, I will load it into my Google Colab project and convert it into a Pandas object. Utilizing the functionality provided by Pandas, I will use the following command to obtain a descriptive summary of the data:</p>
<pre tabindex="0"><code class="language-pyhton" data-lang="pyhton">df.info()
</code></pre><p>I got this result:</p>
<img src="/mohamed_yousfi/images/post/data_info.PNG" alt= “” width="500" height="500">
<br><br>
As we can observe, the collected data consists of multiple data types, which need to be converted to a unified type (int64). To accomplish this, I employed the "astype(int)" function.
<br><br>
<p>Additionally, upon examining the provided photo, we noticed the presence of null values in the &ldquo;body_length&rdquo; column. To address this issue, we opted to remove the rows containing null values, utilizing the &ldquo;dropna&rdquo; function.</p>
<p>Furthermore, it came to our attention that there are two datetime objects, namely &ldquo;created_at&rdquo; and &ldquo;updated_at,&rdquo; which cannot be directly utilized in the model. To overcome this challenge, we created a new variable that captures the time duration between the creation of the pull request and its last update. This newly created feature proves to be more meaningful and suitable for incorporation into our model.</p>
<p>Here is the code encompassing all the aforementioned operations:
<br><br></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>dropna()
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;time_diffrence&#39;</span>] <span style="color:#f92672">=</span> (df[<span style="color:#e6db74">&#39;updated_at&#39;</span>] <span style="color:#f92672">-</span> df[<span style="color:#e6db74">&#39;created_at&#39;</span>])<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>total_seconds()<span style="color:#f92672">/</span><span style="color:#ae81ff">60</span><span style="color:#f92672">/</span><span style="color:#ae81ff">60</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>drop(<span style="color:#e6db74">&#39;updated_at&#39;</span>, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>drop(<span style="color:#e6db74">&#39;created_at&#39;</span>, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;time_diffrence&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;time_diffrence&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;body_length&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;body_length&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;merged&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;merged&#39;</span>]<span style="color:#f92672">.</span>astype(int)</span></span></code></pre></div>
<h3 id="one-hot-encoding">One hot Encoding</h3>
<p>Upon revisiting our data, we observe the presence of a feature called &ldquo;author_association.&rdquo; This feature is an object that represents one of the following variables: [COLLABORATOR, CONTRIBUTOR, MEMBER, NONE]. However, we cannot directly use this object in our model. To address this, we need to perform a preprocessing step known as one-hot encoding. This process will generate a separate feature for each possible value within the object.</p>
<p>To accomplish this, I implemented the following code, which performed the one-hot encoding:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>one_hot <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>get_dummies(df[<span style="color:#e6db74">&#39;author_association&#39;</span>], prefix<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;author_association&#39;</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([df, one_hot], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)</span></span></code></pre></div>
<p>By executing this code, we successfully transformed the &lsquo;author_association&rsquo; feature into individual binary features, allowing us to utilize them effectively in our model.</p>
<h3 id="data-leakage">Data Leakage</h3>
<p>Finally, we encounter one remaining issue with our data. Since our goal is to build a model that predicts whether a pull request will be merged or not, we must address the inclusion of the &ldquo;mergable_status&rdquo; feature. Utilizing this particular feature in our model would introduce data leakage, as it would provide direct insight into the prediction label. Consequently, to ensure the integrity and accuracy of our model, I have decided to remove this feature from the dataset.</p>
<h3 id="data-insights">Data insights</h3>
<p>To ensure diversity within our dataset, I calculated the percentage of merged pull requests for each repository and also determined the average number of commits. These metrics provide valuable insights into the distribution and characteristics of the data, contributing to a more comprehensive and representative dataset.</p>
<img src="/mohamed_yousfi/images/post/data_insights.PNG" alt= “” width="500" height="400">
<br><br>
<p>Now, let&rsquo;s proceed with splitting our data into training, validation, and testing sets. This can be achieved using the following simple code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> fast_ml.model_development <span style="color:#f92672">import</span> train_valid_test_split
</span></span><span style="display:flex;"><span>X_train, y_train, X_valid, y_valid, X_test, y_test <span style="color:#f92672">=</span> train_valid_test_split(df, target <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;merged&#39;</span>, 
</span></span><span style="display:flex;"><span>                                                                            train_size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.8</span>, valid_size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>, test_size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>)</span></span></code></pre></div>
<p>Following the data splitting process, let&rsquo;s proceed by visualizing the distribution of our standardized training data using a box plot. This plot will provide us with valuable insights into the distribution of our data. Below is the code I used to generate the box plot:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>fig, axs <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>axs<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Feature Analysis&#39;</span>)
</span></span><span style="display:flex;"><span>axs<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Normalized Values&#39;</span>)
</span></span><span style="display:flex;"><span>pd<span style="color:#f92672">.</span>DataFrame(data<span style="color:#f92672">=</span>X_train_s, columns<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>columns)<span style="color:#f92672">.</span>boxplot(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">8</span>), rot<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>, ax <span style="color:#f92672">=</span> axs, showfliers<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)</span></span></code></pre></div>
<p>And here is the result:</p>
<img src="/mohamed_yousfi/images/post/boxplot.PNG" alt= “” width="600" height="500">
<br><br>
<h2 id="train-and-evaluate">Train and Evaluate</h2>
<p>Now, it&rsquo;s time to train our data. Since our objective is classification, we will employ a simple Logistic Regression model from the sklearn library. Subsequently, we will generate a confusion matrix and calculate the accuracy, recall, and precision scores. Here is the code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.linear_model <span style="color:#f92672">import</span> LogisticRegression
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>lin_reg <span style="color:#f92672">=</span> LogisticRegression()
</span></span><span style="display:flex;"><span>lin_reg<span style="color:#f92672">.</span>fit(X_train_s, y_train)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>y_train_pred <span style="color:#f92672">=</span> lin_reg<span style="color:#f92672">.</span>predict(X_train_s)
</span></span><span style="display:flex;"><span>y_test_pred <span style="color:#f92672">=</span> lin_reg<span style="color:#f92672">.</span>predict(x_test_s)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn <span style="color:#f92672">import</span> metrics
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>confusion_matrix <span style="color:#f92672">=</span> metrics<span style="color:#f92672">.</span>confusion_matrix(y_train, y_train_pred)
</span></span><span style="display:flex;"><span>cm_display <span style="color:#f92672">=</span> metrics<span style="color:#f92672">.</span>ConfusionMatrixDisplay(confusion_matrix <span style="color:#f92672">=</span> confusion_matrix, display_labels <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>, <span style="color:#66d9ef">True</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cm_display<span style="color:#f92672">.</span>plot()
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Accuracy <span style="color:#f92672">=</span> metrics<span style="color:#f92672">.</span>accuracy_score(y_train, y_train_pred)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(Accuracy)
</span></span><span style="display:flex;"><span>print(metrics<span style="color:#f92672">.</span>recall_score(y_train, y_train_pred))
</span></span><span style="display:flex;"><span>print(metrics<span style="color:#f92672">.</span>precision_score(y_train, y_train_pred))
</span></span><span style="display:flex;"><span>print(metrics<span style="color:#f92672">.</span>f1_score(y_train, y_train_pred))</span></span></code></pre></div>
<p>Here is the result of evaluating the model using the test data:</p>
<img src="/mohamed_yousfi/images/post/metrix.PNG" alt= “” width="600" height="500">
<br><br>
<p>Accuracy = 0.8153846153846154</p>
<p>Recall = 0.9672489082969432</p>
<p>Precision = 0.8083941605839416</p>
<p>F1 score = 0.8807157057654076</p>
<h3 id="deep-learning">Deep Learning</h3>
<p>After utilizing the logistic regression model, I proceeded to explore the effectiveness of a neural network model in capturing non-linear relationships between features. Although the neural network model produced slightly improved results, in my opinion, the marginal gain does not justify its usage in our specific application.</p>
<p>Below is the code to build and train the neural network:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> tensorflow <span style="color:#66d9ef">as</span> tf
</span></span><span style="display:flex;"><span>tf<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>set_seed(<span style="color:#ae81ff">42</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>Sequential([
</span></span><span style="display:flex;"><span>    tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>layers<span style="color:#f92672">.</span>Dense(<span style="color:#ae81ff">128</span>, activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>),
</span></span><span style="display:flex;"><span>    tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>layers<span style="color:#f92672">.</span>Dense(<span style="color:#ae81ff">256</span>, activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relu&#39;</span>),
</span></span><span style="display:flex;"><span>    tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>layers<span style="color:#f92672">.</span>Dense(<span style="color:#ae81ff">1</span>, activation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sigmoid&#39;</span>)
</span></span><span style="display:flex;"><span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>model<span style="color:#f92672">.</span>compile(
</span></span><span style="display:flex;"><span>    loss<span style="color:#f92672">=</span>tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>losses<span style="color:#f92672">.</span>binary_crossentropy,
</span></span><span style="display:flex;"><span>    optimizer<span style="color:#f92672">=</span>tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>optimizers<span style="color:#f92672">.</span>Adam(lr<span style="color:#f92672">=</span><span style="color:#ae81ff">0.03</span>),
</span></span><span style="display:flex;"><span>    metrics<span style="color:#f92672">=</span>[
</span></span><span style="display:flex;"><span>        tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>metrics<span style="color:#f92672">.</span>BinaryAccuracy(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;accuracy&#39;</span>),
</span></span><span style="display:flex;"><span>        tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>metrics<span style="color:#f92672">.</span>Precision(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;precision&#39;</span>),
</span></span><span style="display:flex;"><span>        tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>metrics<span style="color:#f92672">.</span>Recall(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;recall&#39;</span>)
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>my_callback <span style="color:#f92672">=</span> tf<span style="color:#f92672">.</span>keras<span style="color:#f92672">.</span>callbacks<span style="color:#f92672">.</span>EarlyStopping(monitor<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;val_loss&#34;</span>, patience<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>history <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>fit(X_train_s, y_train, epochs<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>, validation_data <span style="color:#f92672">=</span> (x_validate_s, y_valid), callbacks<span style="color:#f92672">=</span>[my_callback])</span></span></code></pre></div>
<h3 id="features-importance">Features Importance</h3>
<p>This is the most critical aspect of the project, as it reveals which features of the pull request have the greatest impact on the model&rsquo;s decision-making process. By analyzing these findings, we can determine the most significant characteristics of a pull request.</p>
<img src="/mohamed_yousfi/images/post/feature_importance.PNG" alt= “” width="800" height="800">
<br><br>
<p>As depicted in the image above, we observe that the most influential feature on the model&rsquo;s decision-making process is the number of commits in the pull request. Interestingly, this feature has a negative impact, indicating that a higher number of commits may make it more challenging to have the pull request merged. Conversely, the &ldquo;review_comments_count&rdquo; feature exhibits a positive impact, suggesting that an increased count of review comments positively influences the model&rsquo;s decision.</p>
<p>Furthermore, it is worth noting the presence of the &ldquo;time_difference&rdquo; feature, which represents the duration between the creation of the pull request and its last update. This feature has a negative impact, indicating that a longer duration without updates from the author may make it more difficult to merge the pull request successfully.</p>
<p>By analyzing these findings, we can gain insights into the most critical characteristics of a pull request and their influence on the model&rsquo;s decision.</p>
<h2 id="conclusion">conclusion</h2>
<p>In conclusion, our analysis of pull request data using machine learning provided valuable insights into the factors that impact the success of code integration. By examining a diverse dataset from multiple repositories, we identified crucial contributors such as the number of commits, review comment count, and time difference between creation and last update.</p>
<p>These findings offer development teams actionable information to optimize their workflow and enhance the likelihood of successful pull request merging. Leveraging machine learning empowers teams to make data-driven decisions, improving collaboration and code integration within their projects.</p>
<p>By understanding the significant characteristics of pull requests and their influence on the model&rsquo;s decision-making process, teams can prioritize their efforts and create a more efficient and collaborative coding environment.</p>

          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#what-is-a-pull-request">What is a Pull Request?</a></li>
    <li><a href="#collecting-data">Collecting data</a></li>
    <li><a href="#data-cleaning-and-features-engineering">Data cleaning and Features Engineering</a>
      <ul>
        <li><a href="#one-hot-encoding">One hot Encoding</a></li>
        <li><a href="#data-leakage">Data Leakage</a></li>
        <li><a href="#data-insights">Data insights</a></li>
      </ul>
    </li>
    <li><a href="#train-and-evaluate">Train and Evaluate</a>
      <ul>
        <li><a href="#deep-learning">Deep Learning</a></li>
        <li><a href="#features-importance">Features Importance</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">conclusion</a></li>
  </ul>
</nav>
              </div>
          </aside>
          

          
          <aside class="tags">
            <h5>Tags</h5>
            <ul class="tags-ul list-unstyled list-inline">
              
              <li class="list-inline-item"><a href="https://myousfi96.github.io/mohamed_yousfi/tags/mining-software-repos" target="_blank">Mining Software repos</a></li>
              
              <li class="list-inline-item"><a href="https://myousfi96.github.io/mohamed_yousfi/tags/pull-request" target="_blank">Pull request</a></li>
              
              <li class="list-inline-item"><a href="https://myousfi96.github.io/mohamed_yousfi/tags/machine-learning" target="_blank">machine learning</a></li>
              
            </ul>
          </aside>
          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=Leveraging%20Machine%20Learning%20to%20Identify%20Optimal%20Pull%20Request%20Characteristics&url=https%3a%2f%2fmyousfi96.github.io%2fmohamed_yousfi%2fblogs%2fmining-software-pull-request%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=Leveraging%20Machine%20Learning%20to%20Identify%20Optimal%20Pull%20Request%20Characteristics: https%3a%2f%2fmyousfi96.github.io%2fmohamed_yousfi%2fblogs%2fmining-software-pull-request%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href='mailto:?subject=Leveraging%20Machine%20Learning%20to%20Identify%20Optimal%20Pull%20Request%20Characteristics&amp;body=Check%20out%20this%20site https%3a%2f%2fmyousfi96.github.io%2fmohamed_yousfi%2fblogs%2fmining-software-pull-request%2f'>
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>


<div class="progress">
  <div id="scroll-progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<Script src="/mohamed_yousfi//js/scrollProgressBar.js"></script>


<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>


<script src="/mohamed_yousfi//js/readingTime.js"></script>



  </div><footer>
    <div class="container py-3" id="recent-posts">
    
    
    
    
    <div class="h3 text-center text-secondary py-3">
        Recent Posts
    </div>
    <div class="row justify-content-center">
        
        <div class="col-lg-4 col-md-6 pt-2">
            <div class="card h-100">
                
                <div class="card-header">
                    <a href="/mohamed_yousfi/blogs/mining-software-pull-request/">
                        <img src="/mohamed_yousfi/mining_software.jpg" class="card-img-top" alt="Leveraging Machine Learning to Identify Optimal Pull Request Characteristics">
                    </a>
                </div>
                
                <div class="card-body bg-transparent p-3 shadow-sm">
                    <a href="/mohamed_yousfi/blogs/mining-software-pull-request/" class="primary-font card-title">
                        <h5 class="card-title bg-transparent" title="Leveraging Machine Learning to Identify Optimal Pull Request Characteristics">Leveraging Machine …</h5>
                    </a>
                    <div class="card-text secondary-font">
                        <p>Introduction In the realm of collaborative software development, pull requests play a pivotal role in code integration and review. However, understanding the key factors that determine the success of pull requests can be complex.
In this blog post, we utilize machine learning to uncover insights …</p>
                    </div>
                </div>
                <div class="mt-auto card-footer">
                    <span class="float-start">Apr 3, 2023</span>
                    <a href="/mohamed_yousfi/blogs/mining-software-pull-request/" class="float-end btn btn-outline-info btn-sm">Read</a>
                </div>
            </div>
        </div>
        
    </div>
    
</div><div class="text-center pt-2">
    

    

    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            <div class="pb-2">
                <a href="https://myousfi96.github.io/mohamed_yousfi/" title="Mohamed Yousfi">
                    <img alt="Footer logo" src="/mohamed_yousfi/portfolio.png"
                        height="40px" width="40px">
                </a>
            </div>
            &copy; 2023  All rights reserved
           
        </div>
    </div>
</div></footer><script src="/mohamed_yousfi//bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>









  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>